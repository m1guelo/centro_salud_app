<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Solicitud de Permiso</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header img {
            height: 70px;
        }

        .section-title {
            font-weight: bold;
            text-align: center;
            text-decoration: underline;
            margin: 20px 0;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            border: 1px solid black;
            padding: 5px;
            text-align: left;
        }

        .table th {
            background-color: #f2f2f2;
        }

        .signature {
            margin-top: 40px;
            text-align: center;
        }

        .signature p {
            margin: 5px 0;
        }

        .footer {
            margin-top: 40px;
            font-size: 12px;
            text-align: justify;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <img src="{{ logo_url }}" alt="Logo Departamento de Salud Parral">
        <p>Departamento de Salud Parral<br>Unidad de Personal</p>
    </div>

    <!-- Title -->
    <h2 class="section-title">SOLICITUD DE PERMISO</h2>

    <!-- Fecha -->
    <p><strong>Fecha:</strong> {{ permission.date_from }}</p>

    <!-- Datos principales -->
    <table class="table">
        <tr>
            <th>Nombre Completo</th>
            <td>{{ permission.full_name }}</td>
            <th>RUT</th>
            <td>{{ permission.rut }}</td>
        </tr>
        <tr>
            <th>Cargo</th>
            <td>{{ permission.position }}</td>
            <th>Establecimiento</th>
            <td>{{ permission.establishment }}</td>
        </tr>
    </table>

    <!-- Detalles de la solicitud -->
    <h3 class="section-title">Detalles de la Solicitud</h3>
    <table class="table">
        <tr>
            <th>N° Días</th>
            <td>{{ permission.number_of_days }}</td>
            <th>Desde</th>
            <td>{{ permission.date_from }}</td>
            <th>Hasta</th>
            <td>{{ permission.date_to }}</td>
        </tr>
        <tr>
            <th>Periodo</th>
            <td colspan="5">{{ permission.period }}</td>
        </tr>
    </table>

    <!-- Firma -->
    <div class="signature">
        <p>_____________________________</p>
        <p>Firma Funcionario</p>
    </div>

    <!-- Estado de la solicitud -->
    <h3 class="section-title">Estado de la Solicitud</h3>
    <table class="table">
        <tr>
            <th>Aprobado por:</th>
            <td>{{ approved_by }}</td>
        </tr>
        <tr>
            <th>Firma del aprobador:</th>
            <td>
                {% if approver_signature %}
                    <img src="{{ approver_signature.url }}" alt="Firma Aprobador" style="height: 50px;">
                {% else %}
                    No disponible
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Autorizado</th>
            <td>{{ permission.autorizado|yesno:"Sí,No" }}</td>
            <th>Anticipado</th>
            <td>{{ permission.anticipado|yesno:"Sí,No" }}</td>
            <th>Postergado</th>
            <td>{{ permission.postergado|yesno:"Sí,No" }}</td>
        </tr>
        <tr>
            <th>Desde</th>
            <td>{{ permission.additional_date_from|default:"-" }}</td>
            <th>Hasta</th>
            <td>{{ permission.additional_date_to|default:"-" }}</td>
            <th colspan="2"></th>
        </tr>
    </table>

    <!-- Footer -->
    <div class="footer">
        <p>Para conceder este tipo de permiso, cada Jefe Directo deberá garantizar el correcto funcionamiento de su Establecimiento o Centro de Salud y/o Unidad de Trabajo.</p>
    </div>
</body>
</html>
